
## JVM (跨语言的平台)

### 特点 

- 一次编译，到处运行
- 自动内存管理
- 自动垃圾回收功能

### 基本概念

JVM是可运行java代码(不仅仅java,Groovy,Scala,JavaScript等)的假想计算机，包括一套字节码指令集，一组寄存器、一个栈、一个垃圾回收、堆和一个存储方法域 。 JVM运行在操作系统上，与硬件没有直接的交互。
![](/img/java/JVM位置.png)

java源文件 通过编译器 可以生成字节码文件(.class文件) 然后通过不同平台的jvm(java虚拟机)中的解释器，编译成电脑能识别的机器码，从而实现一次编译 多次运行

也就是:
- java源文件  -> 编译器  ->字节码文件 
- 字节码文件 -> JVM -> 机器码

### JMM(Java内存模型 Java Memory Model)

    本身是一种抽象的概念，并不真实存在，它描述的是一组规则或规范,通过这种规范定义了程序重各个变量的访问方式 
#### JMM线程安全三大特性(大多数线程安全开发需要遵守)

- 可见性
- 原子性(synchronized满足，volatile不满足)
- 有序性

### volatile

volatile是Java虚拟机提供的轻量级的同步机制(synchronized)。

### volatile三大特性
- 保证可见性

    JVM运行程序的实体是线程，每个线程创建时JVM会为其创建一个工作内存，Java内存模型重规定所有变量都存储在**主内存，主内存是共享内存区域，但线程对变量的操作必须在工作内存重进行，首先讲变量从主内存中拷贝到工作内存，操作结束后再将内存写回主内存。***当多个线程进行一个操作时，其中一个线程已经操作完后，写回主内存了，需要告诉其他线程不需要再进行操作，叫做保证可见性。
- 不保证原子性
- 禁止指令重排

